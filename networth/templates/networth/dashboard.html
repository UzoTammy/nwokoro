{% extends 'core/base.html' %}

{% block head %}
<style>

</style>
{% endblock %}
{% block content %}

<nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup"
        aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav mr-auto">
        </div>
        <div class="navbar-nav">
            <a class="nav-link" href="{% url 'networth-home'%}"><i class="fa fa-times text-danger"></i></a>
        </div>

    </div>
</nav>

<div class="container mt-5 font-weight-lighter">
    <div class="row justify-content-center">
        <div class="col-sm-6">
            <ul class="list-group list-group-flush">
                <li class="list-group-item">Base Networth <span class="float-right">{{financials.base_networth}}</span>
                </li>
                <li class="list-group-item">Base Daily ROI <span
                        class="float-right">{{financials.base_daily_roi}}</span></li>
                <li class="list-group-item">Expected Year-End Networth <span
                        class="float-right">{{financials.EYEV}}</span></li>
                <li class="list-group-item">Expected Year-End Growth <span
                        class="float-right">{{financials.EYEP}}</span></li>
            </ul>
        </div>
        <div class="col-sm-6">
            <ul class="list-group list-group-flush">
                <li class="list-group-item">Max Networth <span class="float-right">{{max_networth}}</span></li>
                <li class="list-group-item">Date of Max Networth <span class="float-right">{{date_max_networth}}</span></li>
                <li class="list-group-item">Worst Rate <span class="float-right">{{max_rate|first}}{{max_rate|last}}/$</span></li>
                <li class="list-group-item">Present Growth Rate <span class="float-right">{{present_growth}}</span></li>
            </ul>
        </div>
    </div>
    <div class="row mt-3">
        <div class="col">
            <img class="img-fluid img-thumbnail w-60" src="data:image/png;base64,{{ networth_image|safe }}"
                alt="Weekly Networth trend line plot">
        </div>
        <div class="col">
            <img class="img-fluid img-thumbnail w-60" src="data:image/png;base64,{{ daily_roi_image|safe }}"
                alt="Daily ROI trend line plot">
        </div>
    </div>
    <div class="row mt-3">
        <div class="col">
            <table class="table table-bordered" data-toggle="table">
                <legend>ROI Yearly Outlook in various currencies</legend>
                <thead>
                    <tr>
                        <th></th>
                        {% for key in ytd_roi.keys %}
                        <th colspan="3" class="text-center">{{key}}</th>
                        {% endfor %}
                        <th colspan="3" class="text-center">Total</th>
                    </tr>
                    <tr>
                        <th>Period</th>
                        {% for i in ytd_roi %}
                        <th>Investment</th>
                        <th>ROI</th>
                        <th>%</th>
                        {% endfor %}
                        <th>Invest.($)</th>
                        <th>ROI</th>
                        <th>%</th>
                        
                    </tr>
                </thead>
                <tbody>
                    {% if ytd_roi_next %}
                    <tr>
                        <td>Next year</td>
                        {% for key, investment in ytd_roi_next.items %}
                        <td>{{investment.principal.amount|floatformat:2}}</td>
                        <td>{{investment.roi.amount|floatformat:2}}</td>
                        <td>{{investment.percent}}</td>
                        
                        {% endfor %}
                        <td>{{ytd_roi_total_next_year.principal|floatformat:'2g'}}</td>
                        <td>{{ytd_roi_total_next_year.roi|floatformat:'2g'}}</td>
                        <td>{{ytd_roi_total_next_year.percent|floatformat:'2g'}}</td>
                        
                    </tr>
                    {% endif %}
                    <tr>
                        <td>Current year</td>
                        {% for key, investment in ytd_roi.items %}
                        <td>{{investment.principal.amount|floatformat:2}}</td>
                        <td>{{investment.roi.amount|floatformat:2}}</td>
                        <td>{{investment.percent}}</td>
                        {% endfor %}
                        <td>{{ytd_roi_total_current_year.principal|floatformat:'2g'}}</td>
                        <td>{{ytd_roi_total_current_year.roi|floatformat:'2g'}}</td>
                        <td>{{ytd_roi_total_current_year.percent|floatformat:'2g'}}</td>
                        
                    </tr>
                    {% if ytd_roi_prev %}
                    <tr>
                        <td>Previous year</td>
                        {% for key, investment in ytd_roi_prev.items %}
                        <td>{{investment.principal.amount|floatformat:2}}</td>
                        <td>{{investment.roi.amount|floatformat:2}}</td>
                        <td>{{investment.percent}}</td>
                        {% endfor %}
                        <td>{{ytd_roi_total_prev_year.principal|floatformat:'2g'}}</td>
                        <td>{{ytd_roi_total_prev_year.roi|floatformat:'2g'}}</td>
                        <td>{{ytd_roi_total_prev_year.percent|floatformat:'2g'}}</td>
                        
                    </tr>
                    {% endif %}
                    
                </tbody>
            </table>
        </div>
    </div>
    
    <div class="row mt-3">
        <div class="col">
            <img class="img-fluid img-thumbnail w-60 border-0" src="data:image/png;base64,{{ asset_location|safe }}"
                alt="Networth distribution by country donut chart">
        </div>
    </div>
    
</div>
</div>
{% endblock %}